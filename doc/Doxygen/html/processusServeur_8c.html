<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Projet Système/Réseau: /home/m/meliardq/pr/sources/processusServeur.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Projet Système/Réseau
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Documentation</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_08d237fc27d4ecd563f71c5d52f2fecc.html">sources</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">processusServeur.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Les fonctions du serveur.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;processusServeur.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for processusServeur.c:</div>
<div class="dyncontent">
<div class="center"><img src="processusServeur_8c__incl.png" border="0" usemap="#_2home_2m_2meliardq_2pr_2sources_2processusServeur_8c" alt=""/></div>
<map name="_2home_2m_2meliardq_2pr_2sources_2processusServeur_8c" id="_2home_2m_2meliardq_2pr_2sources_2processusServeur_8c">
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adf8b843c58caf0fd2b624ba9745ead22"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="processusServeur_8c.html#adf8b843c58caf0fd2b624ba9745ead22">processusFils</a> (int SocketListener, int Socketfils)</td></tr>
<tr class="separator:adf8b843c58caf0fd2b624ba9745ead22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef769fc4ff5334b891294c11e241240a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="processusServeur_8c.html#aef769fc4ff5334b891294c11e241240a">processImport</a> (int sock)</td></tr>
<tr class="memdesc:aef769fc4ff5334b891294c11e241240a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Permet l'importation des images.  <a href="#aef769fc4ff5334b891294c11e241240a">More...</a><br /></td></tr>
<tr class="separator:aef769fc4ff5334b891294c11e241240a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace038de733031c0f09dbfeb3515475ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="processusServeur_8c.html#ace038de733031c0f09dbfeb3515475ed">processusConsult</a> (int sock, int commande)</td></tr>
<tr class="separator:ace038de733031c0f09dbfeb3515475ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38d334a79b854b28f59132df21a8d5f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a38d334a79b854b28f59132df21a8d5f5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="processusServeur_8c.html#a38d334a79b854b28f59132df21a8d5f5">finProcessusFils</a> ()</td></tr>
<tr class="memdesc:a38d334a79b854b28f59132df21a8d5f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attend la mort du processus fils. <br /></td></tr>
<tr class="separator:a38d334a79b854b28f59132df21a8d5f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48677bff48496b833df03fdb61110c7c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48677bff48496b833df03fdb61110c7c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="processusServeur_8c.html#a48677bff48496b833df03fdb61110c7c">signalHandler</a> ()</td></tr>
<tr class="memdesc:a48677bff48496b833df03fdb61110c7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction qui vas kill les processus fils stockés dans pid[]. <br /></td></tr>
<tr class="separator:a48677bff48496b833df03fdb61110c7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15b91ad80bef8da7e288f2c05332c88d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="processusServeur_8c.html#a15b91ad80bef8da7e288f2c05332c88d">processusExport</a> (int sock)</td></tr>
<tr class="memdesc:a15b91ad80bef8da7e288f2c05332c88d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fonction qui gère l'arrivée du fichier depuis le client.  <a href="#a15b91ad80bef8da7e288f2c05332c88d">More...</a><br /></td></tr>
<tr class="separator:a15b91ad80bef8da7e288f2c05332c88d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51ef097fdf83dbafe2823ca258c96b8d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="processusServeur_8c.html#a51ef097fdf83dbafe2823ca258c96b8d">verifMimeType</a> (char tmp[30])</td></tr>
<tr class="memdesc:a51ef097fdf83dbafe2823ca258c96b8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Vérification Des extensions des fichiers.  <a href="#a51ef097fdf83dbafe2823ca258c96b8d">More...</a><br /></td></tr>
<tr class="separator:a51ef097fdf83dbafe2823ca258c96b8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ea87e7a212448d9ca32cd29c952a056"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="processusServeur_8c.html#a7ea87e7a212448d9ca32cd29c952a056">closePipe</a> (int tunnel[2])</td></tr>
<tr class="memdesc:a7ea87e7a212448d9ca32cd29c952a056"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ferme le pipe passer en argument.  <a href="#a7ea87e7a212448d9ca32cd29c952a056">More...</a><br /></td></tr>
<tr class="separator:a7ea87e7a212448d9ca32cd29c952a056"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Les fonctions du serveur. </p>
<dl class="section date"><dt>Date</dt><dd>3 décembre 2018 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Loïc Lemaire, Loïc Jovanovic, Robinson Lestani, Quentin Meliard </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a7ea87e7a212448d9ca32cd29c952a056"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int closePipe </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>tunnel</em>[2]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ferme le pipe passer en argument. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tunnel[2]</td><td>Pipe </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 </dd></dl>

</div>
</div>
<a class="anchor" id="aef769fc4ff5334b891294c11e241240a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processImport </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Permet l'importation des images. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Sock de communication</td></tr>
  </table>
  </dd>
</dl>
<p>Dans un premier temps elle récupère les fichiers, les transforme sous forme de liste, et pour tous les fichiers de la liste correspondant, créée un nouveau fichier sur le serveur ayant le même nom que celui du client et copie le contenu du fichier du client dans le nouveau fichier du serveur. </p>

</div>
</div>
<a class="anchor" id="ace038de733031c0f09dbfeb3515475ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processusConsult </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>commande</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>Sock dans la quelle on écrit </td></tr>
    <tr><td class="paramname">commande</td><td>0 pour la consultation, 1 pour l'export </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 en cas de succès sinon -1</dd></dl>
<p>Dans un premier temps si l'utilisateur demande a consulter le répertoire du serveur on affiche le contenu du répertoire imageServeur. Dans un second temps si l'utilisateur demande l'export on affiche le contenu du répertoire imageServeur et on procède à l'exportation des fichiers voulus par l'utilisateur </p>

</div>
</div>
<a class="anchor" id="a15b91ad80bef8da7e288f2c05332c88d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void processusExport </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fonction qui gère l'arrivée du fichier depuis le client. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">arc</td><td>nombre de fichiers (limité à deux) </td></tr>
    <tr><td class="paramname">argv,en</td><td>premier nom du port (sup à 3000) et ensuite le nom de serveur. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 en cas de succès sinon -1 </dd></dl>

</div>
</div>
<a class="anchor" id="adf8b843c58caf0fd2b624ba9745ead22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int processusFils </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>SocketListener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>SocketFils</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SocketListener,le</td><td>numéro de descripteur fichier de notre socket listener </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>fils </dd></dl>

</div>
</div>
<a class="anchor" id="a51ef097fdf83dbafe2823ca258c96b8d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int verifMimeType </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>tmp</em>[30]</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Vérification Des extensions des fichiers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tmp[30]</td><td>Chemin du fichier temporaire </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 en cas de succes ou 1 en cas d'echec </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
